<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <link rel="stylesheet" href="css/center.css" />
	<link rel="stylesheet" href="css/font.css" />
    <script type="text/javascript" src="js/jquery-1.11.3.min.js" ></script>
    <script src="js/layer/layer.js" type="text/javascript" charset="utf-8"></script>
</head>
<body style="background: #fff;">
	<h1 class="h1"><button class="iconfont icon-xiangzuo1" onclick="javascript:window.history.back(-1);"></button>修改手机号</h1>
	<div class="hang">
		<p class="p_title">手机号</p>
		<div class="div">
			<input type="number" name="" reg="phoneReg" id="phone" readonly="readonly" value="15445657454" />
		</div>
		<div class="div">
			<input type="number"  reg="verificationCodeReg" placeholder="请输入验证码" name="" id="" value="" />
			<a class="get-code" onclick="getCode(this)" id="J_getCode">获取验证码</a>
            <a class="reset-code" id="J_resetCode" ><span id="J_second" >60</span><s>秒后重发</s></a>
		</div>
		<div class="div">
			<input type="number" reg="phoneReg" placeholder="请输入新手机号" name="" id="" value="" />
		</div>
	</div>
	<a class="tiijiao1" href="#" id="sub" >确定</a>
	<script src="js/Zcheck.js" type="text/javascript" charset="utf-8"></script>
	<script>
	
	var lang = sessionStorage.getItem('lang');
		if(!lang) lang = "zh";
	    if(lang == 'zh'){
	    	var text4 = '请输入新手机号码';
	    	var text1 = '请输入手机号码';
	    	var text2 = '请输入验证码';
	    	var text3 = '手机号错误';
	    }else if(lang == 'en'){
	    	var text4 = 'Please enter your cell new phone number';
	    	var text1 = 'Please enter your cell phone number';
	    	var text2 = 'Please enter the verification code';
	    	var text3 = 'Error in mobile number';
	    }else{
	    	var text4 = '請輸入新手機號碼';
	    	var text1 = '請輸入手機號碼';
	    	var text2 = '請輸入驗證碼';
	    	var text3 = '手機號碼错误';
	    }
		
		
		/*获取验证码*/
var isPhone = 1;
function getCode(e){
	checkPhone(); //验证手机号码
	if(isPhone){
		resetCode(); //倒计时
	}else{
		$('#phone').focus();
	}
	
}
//验证手机号码
function checkPhone(){
	var phone = $('#phone').val();
	var pattern = /^1[0-9]{10}$/;
	isPhone = 1;
	if(phone == '') {
		layer.msg('请输入手机号码', { icon: 2,time: 2000});
		isPhone = 0;
		return;
	}
	if(!pattern.test(phone)){
		layer.msg('请输入正确的手机号码', { icon: 2,time: 2000});
		isPhone = 0;
		return;
	}
}
//倒计时
function resetCode(){
	$('#J_getCode').hide();
	$('#J_second').html('60');
	$('#J_resetCode').show();
	var second = 60;
	var timer = null;
	timer = setInterval(function(){
		second -= 1;
		if(second >0 ){
			$('#J_second').html(second);
		}else{
			clearInterval(timer);
			$('#J_getCode').show();
			$('#J_resetCode').hide();
		}
	},1000);
}
var isPhone = 1;
function getCodes(e){
	checkPhones(); //验证手机号码
	if(isPhone){
		resetCodes(); //倒计时
	}else{
		$('#phones').focus();
	}
	
}
//验证手机号码
function checkPhones(){
	var phone = $('#phones').val();
	var pattern = /^1[0-9]{10}$/;
	isPhone = 1;
	if(phone == '') {
		alert('请输入手机号码');
		isPhone = 0;
		return;
	}
	if(!pattern.test(phone)){
		alert('请输入正确的手机号码');
		isPhone = 0;
		return;
	}
}
//倒计时
function resetCodes(){
	$('#J_getCodes').hide();
	$('#J_seconds').html('60');
	$('#J_resetCodes').show();
	var second = 60;
	var timer = null;
	timer = setInterval(function(){
		second -= 1;
		if(second >0 ){
			$('#J_seconds').html(second);
		}else{
			clearInterval(timer);
			$('#J_getCodes').show();
			$('#J_resetCodes').hide();
		}
	},1000);
}
	</script>
</body>
</html>